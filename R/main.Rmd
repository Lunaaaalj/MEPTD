---
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = FALSE)

```


Juntando todos los datos de todos los a침os, se obtiene infofmacion relevante sobre la base de datos

# Estructura:


```{r}
# Set working directory to the correct folder (Datos, not data)
setwd("/Users/angelluna/Documents/STEM_PROJECTS/R_Projects_2/MEPTD/data")

# Install and load required library for combining data frames
if (!require(dplyr, quietly = TRUE)) {
  install.packages("dplyr")
  library(dplyr)
}

if(!require(ggplot2, quietly = TRUE)) {
  install.packages("ggplot2")
  library(ggplot2)
}



# Read CSV files individually first
df_2019 <- read.csv("conjunto_de_datos_molec_2019_02.csv")
df_2020 <- read.csv("conjunto_de_datos_molec_2020_02.csv")
df_2021 <- read.csv("conjunto_de_datos_molec_2021_02.CSV")
df_2022 <- read.csv("conjunto_de_datos_molec_2022_02.CSV")
df_2023 <- read.csv("conjunto_de_datos_molec_2023_02.CSV")
df_2024 <- read.csv("conjunto_de_datos_molec_2024_02.csv")

# Combine data frames properly using rbind() or bind_rows()
df <- bind_rows(df_2019, df_2020, df_2021, df_2022, df_2023, df_2024)

# Display column names using cat() (preferred) or print()

# clean the data frame

df_c = df[,c(4,104,105,107,85,86,87,89,11,17,18,33,34,52,53)]

str(df_c)

# Alternative: just use print() properly
# print(colnames(df))
# Hola, este es mi cambio
```


# Dimensi칩n del data frame

Para encontrar la cantidad de columnas y renglones del data frame se usan las funciones de ncol y nrow

```{r}
ncol(df_c)
nrow(df_c)
```


# Datos faltantes

Variables selectionadas:

```{r}
head(df_c)
```

Analizando el sumario, no se notan discrepancias en los valores

```{r}
summary(df_c)
```

No hay valores vacios

```{r}
colSums(is.na(df_c))
```

Chequeo de rango de los datos cuantitativos

Edad:

```{r}
subset(df_c,edad <0)
subset(df_c,edad>99)
```

Cantidad de libros leidos:

```{r}
subset(df_c,p4<0)
subset(df_c,p4>70)
```

Revistas:

```{r}
subset(df_c,p10<0)
subset(df_c,p10>25)
```

Periodicos:

```{r}
subset(df_c,p16<0)
subset(df_c,p16>60)
```

Conclusion: no hay discrepancias en la base de datos que podrian afectar el analisis

Prepararemos los datos para tener un mejor analisis, esto requiere que se combinen las columnas de la cantidad de libros, revistas y periodicos leidos en una sola columna mas general:

```{r}
df_c$TL=(df_c$p4+df_c$p10+df_c$p16)
head(df_c)
```


# Descripci칩n de variables

# Exploracion de datos

## Calculo de medias estadisticas

### Variables cuantitativas

### Variables cualitativas

## Herramientas de visualizacion

### Variables cuantitativas

Grafica de dispersion: Textos leidos vs edad

```{r}
ggplot(data = df_c[,c("edad","TL")], aes(x=edad,y=TL)) +
        geom_jitter(size = 0.7)
```


Gran cantidad de valores atipicos, mayor densidad cerca del 0, se nota una baja o nula coorrelacion debido a que es constante cerca del cero


Grafica de barras: Textos leidos vs cantidad de gente



```{r}
ggplot(data = df_c[,c("edad","TL")], aes(x=TL)) +
        geom_bar() +
        stat_function(fun = dnorm,args = list(mean = mean(df_c$TL), sd = sd(df_c$TL)), linewidth = 1) +
        xlim(0,30) +
        ylim(0,1500) +
        geom_vline(xintercept =mean(df_c$TL), aes(x = TL),color = "red",linewidth=1.3)
```


Densidad de cantidad de libros leidos

```{r}
ggplot(data = df_c, aes(x = TL)) +
        geom_density(alpha= 1) +
        xlim(0,50)
```


Distribucion asimetrica con sesgo a la izquierda

Boxplot:

```{r}
ggplot(data = df_c, aes(x = TL, y = edad)) +
        geom_boxplot(fill = "red")
```

### An치lisis de correlacion

Como ya se vio en las graficas anteriores, la probabilidad que haya una correlacion entre la edad y la cantidad de textos leidos de una persona es muy baja. Tambien se puede calcular con la funcion cor(), con esta se observa que la correlacion es virtualmente nula.

```{r}
cor(df_c$TL,df_c$edad)
```


### Variables categoricas

Cantidad de personas que fueron a una libreria en su infancia

```{r}
yes_people=nrow(subset(df_c,p34_1==1))
no_people=nrow(subset(df_c,p34_1==2))
other = nrow(df_c)-yes_people-no_people
vec=c(yes_people,no_people,other)
labels=c("Yes","No","Other")
pie(vec,labels)
```





Nuestro objetivo es analizar como se relacionan las tendencias de lectura con variables categoricas como la manera en la que desarrollaron su infancia y educacion.

A continuacion se realizan graficos de dispersion relacionando las variables categoricas con la cantidad de textos leidos


```{r}
ggplot(df_c, aes(x = df_c$p34_1, y = df_c$TL)) +
        geom_point(position = position_jitter(width = 0.1), alpha = 0.5) +
        labs(title = "lo llevaban a bibliotecas o librerias?",
              x = "1: si, 2: no, otros: nulos", y =  "Cantidad de textos leidos")
```

Porcentaje de personas que acostumbran leer


```{r}
ggplot(df_c, aes(x = p2)) +
        geom_bar() +
        labs(title = "Acostumbra leer?", y = "cantidad de personas", xv="1: si, 2: no, 0: nulo")
```



# Vinculacion de datos categoricos

## Medidas de variables cuantitativas

## Graficos cuantitativos

## Graficos comparativos




















